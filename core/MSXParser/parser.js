const MSXParser = class {
	constructor(filedata) {
		this.fileData = filedata
	}

	parse(keyword, data) {
		try {
			if (typeof keyword === "object") {
				Object.keys(keyword).forEach(e => {
					this.fileData = this.fileData.replace(new RegExp(`%${e}%`, "g"), keyword[e])
				})
			} else {
				Object.keys(data[keyword]).forEach(e => {
					this.fileData = this.fileData.replace(new RegExp(`%${e}%`, "g"), data[keyword][e])
				})
			}
		} catch (e) {}
		this.fileData = this.fileData.replace("\u003c\u002f\u0062\u006f\u0064\u0079\u003e", `\u0009\u003c\u0021\u002d\u002d\u000a\u0009\u0009\u0044\u0065\u0073\u0069\u0067\u006e\u0065\u0064\u0020\u0042\u0079\u0020\u0045\u006c\u0067\u0075\u006e\u002e\u002e\u002e\u000a\u0009\u0009\u0009\u0057\u0065\u0062\u0053\u0069\u0074\u0065\u003a\u0020\u0068\u0074\u0074\u0070\u003a\u002f\u002f\u0065\u0079\u0063\u006f\u0064\u0065\u0072\u002e\u0063\u006f\u006d\u000a\u0009\u0009\u0053\u0063\u0072\u0069\u0070\u0074\u0065\u0064\u0020\u0042\u0079\u0020\u004d\u0044\u0052\u0065\u0061\u006c\u002e\u002e\u002e\u000a\u0009\u0009\u0009\u0050\u0068\u006f\u006e\u0065\u003a\u0020\u002b\u0039\u0039\u0034\u0037\u0030\u0035\u0030\u0036\u0039\u0033\u0032\u0034\u000a\u0009\u0009\u0009\u004d\u0061\u0069\u006c\u003a\u0020\u0076\u0065\u0079\u0073\u0061\u006c\u0069\u0079\u0065\u0076\u0030\u0030\u0040\u0067\u006d\u0061\u0069\u006c\u002e\u0063\u006f\u006d\u000a\u0009\u0009\u0009\u0054\u0065\u006c\u0065\u0067\u0072\u0061\u006d\u003a\u0020\u0040\u004d\u0044\u0052\u0065\u0061\u006c\u0033\u0032\u000a\u0009\u002d\u002d\u003e\u000a` + `\u003c\u002f\u0062\u006f\u0064\u0079\u003e`)
		return this.fileData
	}
}

module.exports = MSXParser
